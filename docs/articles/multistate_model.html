<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Multistate approach for stochastic interventions on a time-to event mediator in the presence of competing risks â€¢ CMAverse</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Multistate approach for stochastic interventions on a time-to event mediator in the presence of competing risks">
<meta property="og:description" content="CMAverse">
<meta property="og:image" content="https://bs1125.github.io/CMAverse/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CMAverse</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/overview.html">Overview of Modeling Approaches</a>
</li>
<li>
  <a href="../articles/quickstart.html">Quickstart</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/single_mediator.html">Statistical Modeling with a Single Mediator</a>
    </li>
    <li>
      <a href="../articles/multiple_mediators.html">Statistical Modeling with Multiple Mediators</a>
    </li>
    <li>
      <a href="../articles/case_control.html">Statistical Modeling for a Case Control Study</a>
    </li>
    <li>
      <a href="../articles/multiple_imputation.html">Statistical Modeling with Missing Data</a>
    </li>
    <li>
      <a href="../articles/post_exposure_confounding.html">Statistical Modeling with Post-exposure Confounding</a>
    </li>
    <li>
      <a href="../articles/multistate_model.html">Multistate Modeling with a Time-to-event Mediator in the Presence of Competing Risks</a>
    </li>
    <li>
      <a href="../articles/measurement_error.html">Sensitivity Analysis for Measurement Error</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
<li>
  <a href="https://github.com/BS1125/CMAverse/">
    <span class="fa fa-github fa-lg"></span>
     
    GitHub
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="multistate_model_files/header-attrs-2.14/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Multistate approach for stochastic interventions
on a time-to event mediator in the presence of competing risks</h1>
            
            <h4 class="date">2024-07-01</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/BS1125/CMAverse/blob/master/vignettes/multistate_model.Rmd"><code>vignettes/multistate_model.Rmd</code></a></small>
      <div class="hidden name"><code>multistate_model.Rmd</code></div>

    </div>

    
    
<p>The DAG for this scientific setting is as follows:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/cmdag.html">cmdag</a></span><span class="op">(</span>outcome <span class="op">=</span> <span class="st">"S"</span>, exposure <span class="op">=</span> <span class="st">"A"</span>, mediator <span class="op">=</span> <span class="st">"M"</span>,
      basec <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"C1"</span>, <span class="st">"C2"</span><span class="op">)</span>, postc <span class="op">=</span> <span class="cn">NULL</span>, node <span class="op">=</span> <span class="cn">TRUE</span>, text_col <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span></code></pre></div>
<p><img src="multistate_model_files/figure-html/DAG%20of%20interest-1.png" width="576"></p>
<p>An example is given to demonstrate how to use
<code>cmest_multistate</code> when there is a time-to-event mediator and
a time-to-event outcome, and the estimation of RD and SD is of interest.
For this purpose, we simulate a dataset with a binary exposure A, a
time-to-event mediator M, a timeto-event outcome S, and two baseline
covariates: one continuous (C1), and one binary (C2).</p>
<div id="data-simulation" class="section level2">
<h2 class="hasAnchor">
<a href="#data-simulation" class="anchor"></a>Data simulation</h2>
<p>We simulate data following the structure shown in the above DAG.
Specifically, we separately generate the following transitions under a
Cox proportional hazards model with the constant baseline hazard, i.e.,
assuming exponential time to event:</p>
<ul>
<li>Transition 1 (<span class="math inline">\(A \rightarrow M\)</span>):
<span class="math inline">\(\lambda_{01}(t|A,C1,C2) =
\lambda_{01}^0(t)e^{a_1A+a_2C1+a_3C2} = 1.5 \cdot
e^{=1.9A+0.2C1+0.5C2}\)</span>
</li>
<li>Transition 2 (<span class="math inline">\(A \rightarrow S\)</span>):
<span class="math inline">\(\lambda_{02}(t|A,C1,C2) =
\lambda_{02}^0(t)e^{b_1A+b_3C1+b_4C2} = 1 \cdot
e^{A-0.5C1-0.3C2}\)</span>
</li>
<li>Transition 3 (<span class="math inline">\(M \rightarrow S\)</span>):
<span class="math inline">\(\lambda_{12}(t|A,C1,C2) =
\lambda_{12}^0(t)e^{c_1A+c_2M+c_3C1+c_4C2} = 0.8 \cdot e^{0.55A-0.15M
-0.1C1-0.2C2}\)</span>
</li>
</ul>
<p>The code for generating the aforementioned data is as follows:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># set up coefficients </span>
<span class="co"># transition 1 (A to M)</span>
<span class="va">a1</span> <span class="op">=</span> <span class="op">-</span><span class="fl">1.9</span> 
<span class="va">a2</span> <span class="op">=</span> <span class="fl">0.2</span> 
<span class="va">a3</span> <span class="op">=</span> <span class="fl">0.5</span> 

<span class="co"># transition 2 (A to S)</span>
<span class="va">b1</span> <span class="op">=</span> <span class="fl">1</span> 
<span class="va">b3</span> <span class="op">=</span> <span class="op">-</span><span class="fl">0.5</span>
<span class="va">b4</span> <span class="op">=</span> <span class="fl">0.3</span>

<span class="co"># transition 3 (M to S)</span>
<span class="va">c1</span> <span class="op">=</span> <span class="fl">0.55</span>
<span class="va">c2</span> <span class="op">=</span> <span class="op">-</span><span class="fl">0.15</span> 
<span class="va">c3</span> <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span> 
<span class="va">c4</span> <span class="op">=</span> <span class="op">-</span><span class="fl">0.2</span> 

<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">8</span><span class="op">)</span> 

<span class="co"># build a function to generate time-to-event data</span>
<span class="va">gen_srv</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span>, <span class="va">lambda</span>, <span class="va">beta</span>, <span class="va">X</span><span class="op">)</span><span class="op">{</span>
  <span class="va">X</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">X</span><span class="op">)</span>
  <span class="va">beta</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">beta</span>, ncol<span class="op">=</span><span class="fl">1</span><span class="op">)</span>
  <span class="va">time</span> <span class="op">=</span> <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="va">lambda</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="va">X</span> <span class="op">%*%</span> <span class="va">beta</span><span class="op">)</span><span class="op">)</span> 
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">2000</span> 
<span class="va">A</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>,replace<span class="op">=</span><span class="cn">TRUE</span>, size<span class="op">=</span><span class="va">n</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.5</span>,<span class="fl">0.5</span><span class="op">)</span><span class="op">)</span> <span class="co">#binary exposure</span>
<span class="va">C1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>,replace<span class="op">=</span><span class="cn">TRUE</span>, size<span class="op">=</span><span class="va">n</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.6</span>, <span class="fl">0.4</span><span class="op">)</span><span class="op">)</span> <span class="co">#binary baseline covariate</span>
<span class="va">C2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="va">n</span>, mean <span class="op">=</span> <span class="fl">1</span>, sd <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="co">#continuous baseline covariate</span>
<span class="va">id</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">n</span><span class="op">)</span>
<span class="va">full</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">id</span>,<span class="va">A</span>,<span class="va">C1</span>,<span class="va">C2</span><span class="op">)</span>
<span class="va">M</span> <span class="op">=</span> <span class="fu">gen_srv</span><span class="op">(</span>n<span class="op">=</span><span class="va">n</span>, lambda <span class="op">=</span> <span class="fl">1.5</span>, beta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">a1</span>,<span class="va">a2</span>,<span class="va">a3</span><span class="op">)</span>, X<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">A</span>,<span class="va">C1</span>,<span class="va">C2</span><span class="op">)</span><span class="op">)</span> <span class="co">#time to event mediator</span>
<span class="va">S</span> <span class="op">=</span> <span class="fu">gen_srv</span><span class="op">(</span>n<span class="op">=</span><span class="va">n</span>, lambda <span class="op">=</span> <span class="fl">1</span>, beta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">b1</span>,<span class="va">b3</span>,<span class="va">b4</span><span class="op">)</span>, X<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">A</span>,<span class="va">C1</span>,<span class="va">C2</span><span class="op">)</span><span class="op">)</span> <span class="co">#time to event outcome</span>
<span class="va">data</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">n</span><span class="op">)</span>, M <span class="op">=</span> <span class="va">M</span>, S <span class="op">=</span> <span class="va">S</span><span class="op">)</span>
<span class="co"># indicator for event</span>
<span class="va">data</span><span class="op">$</span><span class="va">ind_M</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">M</span> <span class="op">&lt;=</span> <span class="va">data</span><span class="op">$</span><span class="va">S</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span>
<span class="va">data</span><span class="op">$</span><span class="va">ind_S</span> <span class="op">=</span> <span class="fl">1</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span><span class="op">(</span><span class="va">data</span>,<span class="va">full</span> , by <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span>
<span class="co"># modify S distribution</span>
<span class="va">trans_matrix</span> <span class="op">=</span> <span class="fu">transMat</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>, names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"M"</span>, <span class="st">"S"</span><span class="op">)</span><span class="op">)</span>
<span class="va">covs</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>,<span class="st">"M"</span>, <span class="st">"C1"</span>,<span class="st">"C2"</span><span class="op">)</span>
<span class="va">pre_data</span> <span class="op">=</span> <span class="fu">msprep</span><span class="op">(</span>time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="st">"M"</span>, <span class="st">"S"</span><span class="op">)</span>, status <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="st">"ind_M"</span>, <span class="st">"ind_S"</span><span class="op">)</span>,
                         data <span class="op">=</span> <span class="va">data</span>, trans <span class="op">=</span> <span class="va">trans_matrix</span>, keep <span class="op">=</span> <span class="va">covs</span><span class="op">)</span>
<span class="va">pre_data</span> <span class="op">=</span> <span class="fu">expand.covs</span><span class="op">(</span><span class="va">pre_data</span>, <span class="va">covs</span>, append <span class="op">=</span> <span class="cn">TRUE</span>, longnames <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="co"># resample for T &lt; S</span>
<span class="va">data_23</span> <span class="op">=</span> <span class="va">pre_data</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">pre_data</span><span class="op">$</span><span class="va">trans</span> <span class="op">==</span> <span class="fl">3</span><span class="op">)</span>,<span class="op">]</span>
<span class="va">data_23_tem</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="cn">NA</span>,<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">data_23</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>,
                         new_y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="cn">NA</span>,<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">data_23</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"# to resample is "</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">data_23</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "# to resample is  823"</code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">data_23</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">{</span>
  <span class="va">data_23_tem</span><span class="op">$</span><span class="va">id</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">=</span> <span class="va">data_23</span><span class="op">$</span><span class="va">id</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>
  <span class="kw">repeat</span> <span class="op">{</span>
    <span class="va">time_test</span> <span class="op">=</span> <span class="fu">gen_srv</span><span class="op">(</span>n <span class="op">=</span> <span class="fl">1</span>, 
                        lambda <span class="op">=</span> <span class="fl">0.8</span>,
                        beta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">c1</span><span class="op">)</span>,
                                 <span class="va">c2</span>,
                                 <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">c3</span><span class="op">)</span>,
                                 <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">c4</span><span class="op">)</span><span class="op">)</span>, 
                        X <span class="op">=</span> <span class="va">data_23</span><span class="op">[</span><span class="va">i</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A.3"</span>, <span class="st">"M.3"</span>, <span class="st">"C1.3"</span>,<span class="st">"C2.3"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>
    <span class="co"># exit if the condition is met</span>
    <span class="kw">if</span> <span class="op">(</span><span class="va">time_test</span> <span class="op">&gt;</span> <span class="va">data_23</span><span class="op">[</span><span class="va">i</span>,<span class="st">"M.3"</span><span class="op">]</span><span class="op">)</span> <span class="kw">break</span>
  <span class="op">}</span>
  <span class="va">data_23_tem</span><span class="op">$</span><span class="va">new_y</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">=</span> <span class="va">time_test</span>
<span class="op">}</span>
<span class="va">data_temp</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">data_23_tem</span>, by <span class="op">=</span> <span class="st">"id"</span>, all <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>
<span class="co"># modify M and S</span>
<span class="va">data_temp</span><span class="op">$</span><span class="va">S</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">data_temp</span><span class="op">$</span><span class="va">ind_M</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span><span class="op">]</span> <span class="op">=</span> <span class="va">data_temp</span><span class="op">$</span><span class="va">new_y</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">data_temp</span><span class="op">$</span><span class="va">ind_M</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span><span class="op">]</span>
<span class="va">data_temp</span><span class="op">$</span><span class="va">M</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">data_temp</span><span class="op">$</span><span class="va">ind_M</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span><span class="op">]</span> <span class="op">=</span> <span class="va">data_temp</span><span class="op">$</span><span class="va">S</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">data_temp</span><span class="op">$</span><span class="va">ind_M</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span><span class="op">]</span>
<span class="va">data_final</span> <span class="op">=</span> <span class="va">data_temp</span>
<span class="va">data_final</span><span class="op">$</span><span class="va">A</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">data_final</span><span class="op">$</span><span class="va">A</span><span class="op">)</span> 

<span class="va">sc_data</span> <span class="op">=</span> <span class="va">data_final</span> <span class="op">%&gt;%</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">id</span>,<span class="va">A</span>,<span class="va">M</span>,<span class="va">S</span>,<span class="va">ind_M</span>,<span class="va">ind_S</span>,<span class="va">C1</span>,<span class="va">C2</span><span class="op">)</span>

<span class="co"># generate time to censoring and update event indicator</span>
<span class="va">time_to_censor</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="va">n</span>, <span class="fl">0</span>, <span class="fl">2</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">sc_data</span><span class="op">$</span><span class="va">S</span><span class="op">)</span><span class="op">)</span>
<span class="va">sc_data</span><span class="op">$</span><span class="va">ind_S</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">sc_data</span><span class="op">$</span><span class="va">S</span> <span class="op">&gt;</span> <span class="va">time_to_censor</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>
<span class="va">sc_data</span><span class="op">$</span><span class="va">A</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">sc_data</span><span class="op">$</span><span class="va">A</span><span class="op">)</span>
<span class="va">sc_data</span><span class="op">$</span><span class="va">C1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">sc_data</span><span class="op">$</span><span class="va">C1</span><span class="op">)</span></code></pre></div>
<p>We fit the multistate Cox proportional hazards model to the simulated
data. We can see that the regression coefficient estimates are close to
the set-up values, which is expected:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## prepare the simulated data into counting process format</span>
<span class="va">mstate_sc_data</span> <span class="op">=</span> <span class="fu">msprep</span><span class="op">(</span>time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="st">"M"</span>, <span class="st">"S"</span><span class="op">)</span>, status <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="st">"ind_M"</span>, <span class="st">"ind_S"</span><span class="op">)</span>,
                         data <span class="op">=</span> <span class="va">sc_data</span>, trans <span class="op">=</span> <span class="va">trans_matrix</span>, keep <span class="op">=</span> <span class="va">covs</span><span class="op">)</span>
<span class="va">mstate_sc_data</span> <span class="op">=</span> <span class="fu">expand.covs</span><span class="op">(</span><span class="va">mstate_sc_data</span>, <span class="va">covs</span>, append <span class="op">=</span> <span class="cn">TRUE</span>, longnames <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="co">## fit mstate model to the simulated data</span>
<span class="va">sc_joint_mod</span> <span class="op">=</span> <span class="fu">coxph</span><span class="op">(</span><span class="fu">Surv</span><span class="op">(</span><span class="va">Tstart</span>, <span class="va">Tstop</span>, <span class="va">status</span><span class="op">)</span> <span class="op">~</span> <span class="va">A.1</span> <span class="op">+</span> <span class="va">A.2</span> <span class="op">+</span> <span class="va">A.3</span> <span class="op">+</span>
                         <span class="va">M.3</span> <span class="op">+</span> <span class="va">C1.1</span> <span class="op">+</span> <span class="va">C1.2</span> <span class="op">+</span> <span class="va">C1.3</span> <span class="op">+</span> <span class="va">C2.1</span> <span class="op">+</span> <span class="va">C2.2</span> <span class="op">+</span> <span class="va">C2.3</span> <span class="op">+</span> <span class="fu">strata</span><span class="op">(</span><span class="va">trans</span><span class="op">)</span>,
                      data <span class="op">=</span> <span class="va">mstate_sc_data</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">sc_joint_mod</span><span class="op">)</span></code></pre></div>
<pre><code>## Call:
## coxph(formula = Surv(Tstart, Tstop, status) ~ A.1 + A.2 + A.3 + 
##     M.3 + C1.1 + C1.2 + C1.3 + C2.1 + C2.2 + C2.3 + strata(trans), 
##     data = mstate_sc_data)
## 
##   n= 4823, number of events= 2746 
## 
##          coef exp(coef) se(coef)       z Pr(&gt;|z|)    
## A.1  -1.82713   0.16088  0.09545 -19.143  &lt; 2e-16 ***
## A.2   0.95419   2.59658  0.06776  14.081  &lt; 2e-16 ***
## A.3   0.49085   1.63371  0.10054   4.882 1.05e-06 ***
## M.3  -0.14227   0.86739  0.11808  -1.205  0.22826    
## C1.1  0.07088   1.07346  0.07048   1.006  0.31455    
## C1.2 -0.50335   0.60451  0.06169  -8.160 3.36e-16 ***
## C1.3 -0.18410   0.83185  0.07452  -2.470  0.01349 *  
## C2.1  0.47866   1.61391  0.03507  13.650  &lt; 2e-16 ***
## C2.2  0.29820   1.34743  0.03035   9.824  &lt; 2e-16 ***
## C2.3 -0.11371   0.89252  0.03786  -3.003  0.00267 ** 
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
##      exp(coef) exp(-coef) lower .95 upper .95
## A.1     0.1609     6.2160    0.1334    0.1940
## A.2     2.5966     0.3851    2.2736    2.9654
## A.3     1.6337     0.6121    1.3415    1.9895
## M.3     0.8674     1.1529    0.6882    1.0933
## C1.1    1.0735     0.9316    0.9350    1.2325
## C1.2    0.6045     1.6542    0.5357    0.6822
## C1.3    0.8319     1.2021    0.7188    0.9627
## C2.1    1.6139     0.6196    1.5067    1.7287
## C2.2    1.3474     0.7422    1.2696    1.4300
## C2.3    0.8925     1.1204    0.8287    0.9613
## 
## Concordance= 0.685  (se = 0.006 )
## Likelihood ratio test= 1088  on 10 df,   p=&lt;2e-16
## Wald test            = 925.2  on 10 df,   p=&lt;2e-16
## Score (logrank) test = 1043  on 10 df,   p=&lt;2e-16</code></pre>
<p>Below, we visualize the time-to-mediator and the time-to-event
distributions by exposure group for all subjects with <span class="math inline">\(C1=1\)</span>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># overlayed histogram of time to mediator and outcome distributions</span>
<span class="va">hist_sc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">sc_data</span><span class="op">$</span><span class="va">M</span>, <span class="va">sc_data</span><span class="op">$</span><span class="va">S</span><span class="op">)</span>,
                 group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">sc_data</span><span class="op">$</span><span class="va">M</span><span class="op">)</span><span class="op">)</span>,
                           <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"S"</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">sc_data</span><span class="op">$</span><span class="va">S</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">hist_sc</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">value</span>, fill <span class="op">=</span> <span class="va">group</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"identity"</span>, alpha <span class="op">=</span> <span class="fl">0.5</span>, bins <span class="op">=</span> <span class="fl">50</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Overlayed Histogram of M and S"</span>,
       x <span class="op">=</span> <span class="st">"Observed time"</span>,
       y <span class="op">=</span> <span class="st">"Frequency"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"blue"</span>, <span class="st">"red"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="multistate_model_files/figure-html/Take%20a%20look%20at%20the%20simulated%20data-1.png" width="576"></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># survival curve by treatment group (A=1 vs. A=0) within strata C1=1</span>
<span class="va">survival_fit_sc</span> <span class="op">&lt;-</span> <span class="fu">survfit</span><span class="op">(</span><span class="fu">Surv</span><span class="op">(</span><span class="va">S</span>, <span class="va">ind_S</span><span class="op">)</span> <span class="op">~</span> <span class="va">A</span>, data <span class="op">=</span> <span class="va">sc_data</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">C1</span><span class="op">==</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span>
<span class="fu">ggsurvplot</span><span class="op">(</span><span class="va">survival_fit_sc</span>, data <span class="op">=</span> <span class="va">sc_data</span>, pval <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></code></pre></div>
<p><img src="multistate_model_files/figure-html/Take%20a%20look%20at%20the%20simulated%20data-2.png" width="576"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggsurvplot</span><span class="op">(</span><span class="fu">survfit</span><span class="op">(</span><span class="fu">Surv</span><span class="op">(</span><span class="va">M</span>, <span class="va">ind_M</span><span class="op">)</span> <span class="op">~</span> <span class="va">A</span>, data <span class="op">=</span> <span class="va">sc_data</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">C1</span><span class="op">==</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">sc_data</span>, pval <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></code></pre></div>
<p><img src="multistate_model_files/figure-html/Take%20a%20look%20at%20the%20simulated%20data-3.png" width="576"></p>
</div>
<div id="demonstration" class="section level2">
<h2 class="hasAnchor">
<a href="#demonstration" class="anchor"></a>Demonstration</h2>
<p>In this setting, we can use a multistate modeling approach to compute
the causal estimands of interest (RD, SD, and TE) in the presence of
semi-competing risks. We demonstrate how to achieve this using
<code>cmest_multistate</code>. In this example, we use the
<code>cmest_multistate</code> function to calculate RD and SD for time
points 0.1, 0.5, 1, 2, 3, 4, 5, 6. For demonstration purposes, we only
run 10 bootstraps here. More number of bootstraps are required in
real-world settings (usually &gt;1000). Note this may result in longer
computation time. We have implemented parallel computing to speed-up
processing time.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># specificy time points (s)</span>
<span class="va">time_to_predict_sc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.5</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">6</span><span class="op">)</span>
<span class="co"># run cmest_multistate()</span>
<span class="va">sc_data_result</span> <span class="op">=</span> <span class="fu"><a href="../reference/cmest_multistate.html">cmest_multistate</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sc_data</span>, 
                                  s <span class="op">=</span> <span class="va">time_to_predict_sc</span>,
                                  multistate_seed <span class="op">=</span> <span class="fl">10</span>,
                                  exposure <span class="op">=</span> <span class="st">'A'</span>, mediator <span class="op">=</span> <span class="st">'M'</span>, outcome <span class="op">=</span> <span class="st">'S'</span>,
                                  yevent <span class="op">=</span> <span class="st">"ind_S"</span>,mevent <span class="op">=</span> <span class="st">"ind_M"</span>,
                                  basec <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"C1"</span>, <span class="st">"C2"</span><span class="op">)</span>,
                                  basecval <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"C1"</span> <span class="op">=</span> <span class="st">"1"</span>, 
                                               <span class="st">"C2"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">sc_data</span><span class="op">$</span><span class="va">C2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,
                                  astar<span class="op">=</span><span class="st">"0"</span>, a<span class="op">=</span><span class="st">"1"</span>, 
                                  nboot<span class="op">=</span><span class="fl">10</span>, EMint<span class="op">=</span><span class="cn">F</span>, 
                                  bh_method <span class="op">=</span> <span class="st">"breslow"</span><span class="op">)</span>   </code></pre></div>
<p>The output is a list that consists of 4 elements: 1) The model
summary of the joint multistate Cox proportional hazards model fitted on
the original dataset, 2) the point estimates of RD and SD for each of
the user-specified time points of interest on the original dataset, 3)
the summary of the bootstrapped RD, SD, and TE estimates for each of the
user-specified time point of interest, including the 2.5%, 50%, and
97.5% percentiles, and 4) the estimated RD, SD, TD for each of the
user-specified time point of interest for each bootstrap dataset. These
4 elements of the example output are extracted in order below:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sc_data_result</span><span class="op">$</span><span class="va">model_summary</span></code></pre></div>
<pre><code>## Call:
## coxph(formula = mstate_form, data = mstate_data_orig, method = bh_method)
## 
##   n= 4823, number of events= 2746 
## 
##          coef exp(coef) se(coef)       z Pr(&gt;|z|)    
## A.1  -1.82713   0.16088  0.09545 -19.143  &lt; 2e-16 ***
## A.2   0.95419   2.59658  0.06776  14.081  &lt; 2e-16 ***
## A.3   0.49085   1.63371  0.10054   4.882 1.05e-06 ***
## M.3  -0.14227   0.86739  0.11808  -1.205  0.22826    
## C1.1  0.07088   1.07346  0.07048   1.006  0.31455    
## C1.2 -0.50335   0.60451  0.06169  -8.160 3.36e-16 ***
## C1.3 -0.18410   0.83185  0.07452  -2.470  0.01349 *  
## C2.1  0.47866   1.61391  0.03507  13.650  &lt; 2e-16 ***
## C2.2  0.29820   1.34743  0.03035   9.824  &lt; 2e-16 ***
## C2.3 -0.11371   0.89252  0.03786  -3.003  0.00267 ** 
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
##      exp(coef) exp(-coef) lower .95 upper .95
## A.1     0.1609     6.2160    0.1334    0.1940
## A.2     2.5966     0.3851    2.2736    2.9654
## A.3     1.6337     0.6121    1.3415    1.9895
## M.3     0.8674     1.1529    0.6882    1.0933
## C1.1    1.0735     0.9316    0.9350    1.2325
## C1.2    0.6045     1.6542    0.5357    0.6822
## C1.3    0.8319     1.2021    0.7188    0.9627
## C2.1    1.6139     0.6196    1.5067    1.7287
## C2.2    1.3474     0.7422    1.2696    1.4300
## C2.3    0.8925     1.1204    0.8287    0.9613
## 
## Concordance= 0.685  (se = 0.006 )
## Likelihood ratio test= 1088  on 10 df,   p=&lt;2e-16
## Wald test            = 925.2  on 10 df,   p=&lt;2e-16
## Score (logrank) test = 1043  on 10 df,   p=&lt;2e-16</code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sc_data_result</span><span class="op">$</span><span class="va">pt_est</span></code></pre></div>
<pre><code>##            RD           SD          TE   s
## 1 -0.10502912 -0.012775776 -0.11780489 0.1
## 2 -0.24042128 -0.102666585 -0.34308786 0.5
## 3 -0.24348137 -0.110141935 -0.35362331 1.0
## 4 -0.19363550 -0.066231071 -0.25986657 2.0
## 5 -0.14446578 -0.033089092 -0.17755487 3.0
## 6 -0.08803151 -0.010953827 -0.09898533 4.0
## 7 -0.06025636 -0.004818455 -0.06507482 5.0
## 8 -0.04331584 -0.002328278 -0.04564411 6.0</code></pre>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sc_data_result</span><span class="op">$</span><span class="va">bootstrap_summary</span></code></pre></div>
<pre><code>## # A tibble: 8 x 10
##       s RD_median RD_lower RD_higher SD_median SD_lower  SD_higher TE_median
##   &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt;
## 1   0.1   -0.102   -0.110    -0.0961  -0.0128  -0.0177  -0.00864     -0.116 
## 2   0.5   -0.234   -0.248    -0.218   -0.102   -0.124   -0.0797      -0.335 
## 3   1     -0.237   -0.245    -0.206   -0.109   -0.131   -0.0834      -0.342 
## 4   2     -0.182   -0.199    -0.155   -0.0658  -0.0814  -0.0451      -0.243 
## 5   3     -0.135   -0.152    -0.107   -0.0329  -0.0420  -0.0216      -0.165 
## 6   4     -0.0897  -0.106    -0.0643  -0.0125  -0.0183  -0.00685     -0.0998
## 7   5     -0.0630  -0.0764   -0.0425  -0.00593 -0.0102  -0.00157     -0.0700
## 8   6     -0.0455  -0.0584   -0.0320  -0.00311 -0.00666  0.0000425   -0.0477
## # i 2 more variables: TE_lower &lt;dbl&gt;, TE_higher &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sc_data_result</span><span class="op">$</span><span class="va">raw_output</span></code></pre></div>
<pre><code>##             RD            SD          TE   s
## 1  -0.09582917 -0.0107772411 -0.10660642 0.1
## 2  -0.22917879 -0.0956040606 -0.32478285 0.5
## 3  -0.23381887 -0.1061906050 -0.34000947 1.0
## 4  -0.19188951 -0.0721358075 -0.26402532 2.0
## 5  -0.14354416 -0.0361152516 -0.17965941 3.0
## 6  -0.09211269 -0.0133694556 -0.10548214 4.0
## 7  -0.06363802 -0.0060052599 -0.06964328 5.0
## 8  -0.04526898 -0.0028909308 -0.04815991 6.0
## 9  -0.10270269 -0.0101975780 -0.11290027 0.1
## 10 -0.23597628 -0.1118782193 -0.34785450 0.5
## 11 -0.24070013 -0.1167966881 -0.35749682 1.0
## 12 -0.19212659 -0.0727209360 -0.26484753 2.0
## 13 -0.14827707 -0.0394913656 -0.18776843 3.0
## 14 -0.09592120 -0.0150553657 -0.11097657 4.0
## 15 -0.07122535 -0.0079617224 -0.07918707 5.0
## 16 -0.05058930 -0.0038234755 -0.05441277 6.0
## 17 -0.09693900 -0.0112332815 -0.10817228 0.1
## 18 -0.23343985 -0.0982797551 -0.33171960 0.5
## 19 -0.23928404 -0.1102360525 -0.34952009 1.0
## 20 -0.18199828 -0.0580802511 -0.24007854 2.0
## 21 -0.13440543 -0.0282385592 -0.16264399 3.0
## 22 -0.09068223 -0.0117046238 -0.10238685 4.0
## 23 -0.06626005 -0.0058581751 -0.07211823 5.0
## 24 -0.04480515 -0.0024530200 -0.04725817 6.0
## 25 -0.09793323 -0.0145199345 -0.11245317 0.1
## 26 -0.21557079 -0.1072977232 -0.32286852 0.5
## 27 -0.20254389 -0.1205995928 -0.32314349 1.0
## 28 -0.15264324 -0.0719643041 -0.22460755 2.0
## 29 -0.10558425 -0.0340203756 -0.13960462 3.0
## 30 -0.06345066 -0.0128285638 -0.07627922 4.0
## 31 -0.04127673 -0.0057968838 -0.04707362 5.0
## 32 -0.03059641 -0.0033205978 -0.03391701 6.0
## 33 -0.10815761 -0.0180513653 -0.12620898 0.1
## 34 -0.22824872 -0.1274399682 -0.35568869 0.5
## 35 -0.21775347 -0.1320720810 -0.34982555 1.0
## 36 -0.16807077 -0.0817799753 -0.24985074 2.0
## 37 -0.12446830 -0.0427822834 -0.16725059 3.0
## 38 -0.08028276 -0.0174429052 -0.09772566 4.0
## 39 -0.06191568 -0.0104469023 -0.07236258 5.0
## 40 -0.05026881 -0.0069251139 -0.05719392 6.0
## 41 -0.10990960 -0.0081862992 -0.11809590 0.1
## 42 -0.24948467 -0.0751142212 -0.32459890 0.5
## 43 -0.24589034 -0.0781061513 -0.32399649 1.0
## 44 -0.18277687 -0.0428343896 -0.22561126 2.0
## 45 -0.13576508 -0.0205052210 -0.15627030 3.0
## 46 -0.08974293 -0.0063339673 -0.09607690 4.0
## 47 -0.06226701 -0.0011941768 -0.06346118 5.0
## 48 -0.04577031  0.0005167997 -0.04525351 6.0
## 49 -0.10157396 -0.0164019922 -0.11797595 0.1
## 50 -0.22858676 -0.1032477925 -0.33183456 0.5
## 51 -0.24054450 -0.1274389495 -0.36798345 1.0
## 52 -0.20099815 -0.0800934611 -0.28109161 2.0
## 53 -0.15361668 -0.0389193928 -0.19253607 3.0
## 54 -0.10896280 -0.0185782817 -0.12754108 4.0
## 55 -0.07790026 -0.0094570036 -0.08735726 5.0
## 56 -0.06067558 -0.0057602772 -0.06643586 6.0
## 57 -0.10863129 -0.0131850135 -0.12181630 0.1
## 58 -0.23408429 -0.1086367194 -0.34272101 0.5
## 59 -0.22935671 -0.1074535741 -0.33681028 1.0
## 60 -0.16990980 -0.0530827614 -0.22299256 2.0
## 61 -0.12070484 -0.0253251432 -0.14602998 3.0
## 62 -0.07537269 -0.0086399526 -0.08401264 4.0
## 63 -0.04874026 -0.0028788375 -0.05161910 5.0
## 64 -0.03988600 -0.0015910546 -0.04147706 6.0
## 65 -0.10731264 -0.0137684311 -0.12108107 0.1
## 66 -0.24497828 -0.0956314280 -0.34060971 0.5
## 67 -0.24222253 -0.1027302644 -0.34495280 1.0
## 68 -0.18708672 -0.0596861222 -0.24677285 2.0
## 69 -0.14032495 -0.0318100144 -0.17213496 3.0
## 70 -0.08975343 -0.0121777442 -0.10193117 4.0
## 71 -0.06424414 -0.0061427928 -0.07038693 5.0
## 72 -0.04750107 -0.0033241128 -0.05082518 6.0
## 73 -0.10204920 -0.0123379813 -0.11438718 0.1
## 74 -0.23720533 -0.1016881552 -0.33889349 0.5
## 75 -0.22377660 -0.1016116215 -0.32538822 1.0
## 76 -0.16464793 -0.0597299930 -0.22437793 2.0
## 77 -0.11395497 -0.0279571410 -0.14191211 3.0
## 78 -0.06731208 -0.0095785755 -0.07689065 4.0
## 79 -0.04680357 -0.0045775511 -0.05138112 5.0
## 80 -0.03705171 -0.0028278415 -0.03987955 6.0</code></pre>
<p>We here provide an interpretation of RD and SD estimated from this
simulated dataset:</p>
<ul>
<li><p>TE=x can be interpreted as: The probability of surviving beyond
time point s among the exposed group is x higher than that among the
unexposed group, controlling for baseline covariates,</p></li>
<li><p>RD=x can be interpreted as: The probability of surviving beyond
time point s among the exposed group is x higher than that among the
unexposed group, controlling for baseline covariates, had the mediator
distribution g been the fixed to that of the unexposed group.</p></li>
<li><p>SD=x can be interpreted as: The probability of surviving beyond
time point s among the exposed group is estimated to increase by x, had
the time to mediator distribution among the exposed group been changed
to that of the unexposed group, controlling for baseline
covariates,</p></li>
</ul>
</div>
<div id="reference" class="section level2">
<h2 class="hasAnchor">
<a href="#reference" class="anchor"></a>Reference</h2>
<p>[1] Valeri, L., Proust-Lima, C., Fan, W., Chen, J. T., &amp;
Jacqmin-Gadda, H. (2023). A multistate approach for the study of
interventions on an intermediate time-to-event in health disparities
research. Statistical Methods in Medical Research,
09622802231163331.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Baoyi Shi, Ziqing Wang, Christine Choirat, <a href="https://www.lindavaleri.com/">Linda Valeri</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
